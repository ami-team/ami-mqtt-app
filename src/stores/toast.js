/*--------------------------------------------------------------------------------------------------------------------*/

import {defineStore} from 'pinia';

/*--------------------------------------------------------------------------------------------------------------------*/

const useToastStore = defineStore({
    id: 'toast',
    state: () => ({
        toasts: [],
    }),
    actions: {

        /*------------------------------------------------------------------------------------------------------------*/

        add(specs)
        {
            /*--------------------------------------------------------------------------------------------------------*/

            const toast = this.toasts.filter((el) => el.text === specs.text)[0] || specs;

            /*--------------------------------------------------------------------------------------------------------*/

            if(toast.timeout)
            {
                clearTimeout(toast.timeout);

                toast.counter++;
            }
            else
            {
                this.toasts.push(toast);

                toast.counter = 1;
            }

            /*--------------------------------------------------------------------------------------------------------*/

            toast.timeout = setTimeout(() => {

                this.toasts = this.toasts.filter((el) => el.id !== toast.id);

            }, 30 * 1000);

            /*--------------------------------------------------------------------------------------------------------*/
        },

        /*------------------------------------------------------------------------------------------------------------*/
    },
});

/*--------------------------------------------------------------------------------------------------------------------*/

export default useToastStore;

/*--------------------------------------------------------------------------------------------------------------------*/
